//@ui5-bundle project1/Component-preload.js
sap.ui.require.preload({
	"project1/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","project1/model/models"],(e,t)=>{"use strict";return e.extend("project1.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
},
	"project1/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("project1.controller.App",{onInit(){}})});
},
	"project1/controller/View1.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/BusyIndicator","sap/ui/core/Fragment"],function(e,t,n,o,i,s,r){"use strict";return e.extend("project1.controller.View1",{_getUrl:function(){return sap.ui.require.toUrl("project1")},onInit:function(){const e=new n([]);this.getView().setModel(e,"attachmentModel");this._fetchVendors();this._intervalId=setInterval(()=>{this._fetchVendors()},1e4);this._createDialog=null;this.selectedFiles=null},onExit:function(){if(this._intervalId){clearInterval(this._intervalId);this._intervalId=null}},_fetchVendors:function(){var e=this._getUrl()+`/odata/v4/vendor/Vendors`;console.log(e);fetch(e).then(e=>e.json()).then(e=>{const t=this.getView().getModel("VendModel");if(t){t.setData(e.value)}else{this.getView().setModel(new n(e.value),"VendModel")}this._reapplyFilters()}).catch(e=>{console.error("Failed to fetch vendors:",e)})},_reapplyFilters:function(){const e=this.byId("vendorTable");const t=e.getBinding("items");const n=this.byId("vendorIdFilter").getValue();const s=this.byId("vendorNameFilter").getValue();const r=this.byId("statusFilter").getValue();const a=[];if(n)a.push(new o("ID",i.Contains,n));if(s)a.push(new o("name",i.Contains,s));if(r)a.push(new o("status",i.Contains,r));t.filter(a)},onVendorSelect:function(e){const t=e.getParameter("listItem").getBindingContext("VendModel").getProperty("ID");const n=sap.ui.core.UIComponent.getRouterFor(this);n.navTo("View2",{vendor_Id:t})},onCreateVendor:function(){if(!this._createDialog){r.load({name:"project1.view.CreateVendor",controller:this}).then(e=>{this._createDialog=e;this.getView().addDependent(e);e.open()})}else{this._createDialog.open()}},onFileChange:function(e){this.selectedFiles=e.getParameter("files");console.log("Selected files:",this.selectedFiles)},onCancelVendor:function(){this._createDialog.close()},onDialogClose:function(){sap.ui.getCore().byId("newVendorId").setValue("");sap.ui.getCore().byId("newVendorName").setValue("");sap.ui.getCore().byId("newVendorEmail").setValue("");sap.ui.getCore().byId("newVendorPhone").setValue("");sap.ui.getCore().byId("newFileUploader").clear();this.selectedFiles=null},_isValidEmail:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},_isValidPhone:function(e){return/^\d{10}$/.test(e)},getCSRFToken:async function(e){try{const t=await fetch(e,{method:"GET",headers:{"X-CSRF-Token":"Fetch"}});return t.headers.get("x-csrf-token")}catch(e){console.error("CSRF Token fetch failed:",e);return null}},onSubmitNewVendor:async function(){const e=sap.ui.getCore().byId("newVendorId").getValue();const n=sap.ui.getCore().byId("newVendorName").getValue();const o=sap.ui.getCore().byId("newVendorEmail").getValue();const i=sap.ui.getCore().byId("newVendorPhone").getValue();if(!n||!o||!i||!e||!this.selectedFiles||this.selectedFiles.length===0){t.show("Please fill in all vendor details and upload at least one file.");return}if(!this._isValidEmail(o)){t.show("Please enter a valid email address.");return}if(!this._isValidPhone(i)){t.show("Please enter a valid 10-digit phone number.");return}try{s.show(0);const r={ID:e,name:n,email:o,phone:i};const a=await this.getCSRFToken("odata/v4/vendor/");const l=this._getUrl()+`/odata/v4/vendor/VendorCreation`;const d=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a},body:JSON.stringify(r)});if(!d.ok)throw new Error("Vendor creation failed: "+await d.text());for(let t of this.selectedFiles){const n=new FormData;n.append("file",t);n.append("vendorID",e);const o=this._getUrl()+`/uploadPDF`;const i=await fetch(o,{method:"POST",body:n});if(!i.ok){throw new Error(`Failed to upload file: ${t.name}`)}}t.show("Vendor and file uploaded successfully.");this._createDialog.close();this.onDialogClose();await this._fetchVendors()}catch(e){console.error("Error:",e);t.show("Error occurred during vendor or file upload.")}finally{s.hide()}},onFilter:function(){this._reapplyFilters()}})});
},
	"project1/controller/View2.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel"],function(e,t,o){"use strict";return e.extend("project1.controller.View2",{onInit:function(){const e=this.getOwnerComponent().getRouter();const t=e.getRoute("View2");if(t){t.attachPatternMatched(this._onRouteMatched,this)}else{console.error("Route 'View2' not found! Check manifest.json for routing config.")}},_onRouteMatched:function(e){const n=e.getParameter("arguments").vendor_Id;this.byId("vendorIdText").setText("Vendor ID: "+n);this.byId("busyIndicator").setVisible(true);this.getView().setModel(new o({files:[]}),"attachmentModel");fetch(`odata/v4/vendor/download?vendor_ID=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{const t=new o({files:e.value||[]});this.getView().setModel(t,"attachmentModel");this.byId("busyIndicator").setVisible(false)}).catch(e=>{console.error("Error fetching attachments:",e);t.show("Failed to fetch files.");this.byId("busyIndicator").setVisible(false)});this._approvers(n);clearInterval(this._approverInterval);this._approverInterval=setInterval(()=>{this._approvers(n)},1e4)},_approvers:function(e){fetch(`odata/v4/vendor/VendorApprovals?vendor_ID=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{const t=(e.value||[]).sort((e,t)=>e.level-t.level);const n=new o(t);this.getView().setModel(n,"VendModel1");this.byId("busyIndicator").setVisible(false)}).catch(e=>{console.error("Approvals fetch error:",e);t.show("Failed to fetch vendor approval data.");this.byId("busyIndicator").setVisible(false)})},onDownloadPress:function(e){const t=e.getSource().getBindingContext("attachmentModel");const{fileName:o,content:n,mimeType:s}=t.getProperty();const r=atob(n);const a=Array.from(r,e=>e.charCodeAt(0));const c=new Uint8Array(a);const i=new Blob([c],{type:s});const d=URL.createObjectURL(i);const l=document.createElement("a");l.href=d;l.download=o;document.body.appendChild(l);l.click();document.body.removeChild(l);URL.revokeObjectURL(d)},onDownloadAll:function(){const e=this.getView().getModel("attachmentModel").getProperty("/files");if(!e||!e.length){t.show("No files to download.");return}const o=new JSZip;e.forEach(e=>{const t=atob(e.content);const n=new Uint8Array([...t].map(e=>e.charCodeAt(0)));o.file(e.fileName,n,{binary:true})});o.generateAsync({type:"blob"}).then(e=>{const t=URL.createObjectURL(e);const o=document.createElement("a");o.href=t;o.download="attachments.zip";document.body.appendChild(o);o.click();document.body.removeChild(o);URL.revokeObjectURL(t)})}})});
},
	"project1/i18n/i18n.properties":'# This is the resource bundle for project1\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Vendor Registration\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=Vendor Registration\n\n#XFLD,24\npdfsave-manage.flpTitle=PDF File\n',
	"project1/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"project1","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.17.3","toolsId":"d10c0791-b12a-4789-b12c-cf25897625bb"},"dataSources":{"mainService":{"uri":"odata/v4/vendor/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0","useBatch":false}}},"crossNavigation":{"inbounds":{"project1-display":{"semanticObject":"project1","action":"display","signature":{"parameters":{},"additionalParameters":"allowed"}},"pdfsave-manage":{"semanticObject":"pdfsave","action":"manage","title":"{{pdfsave-manage.flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.134.1","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"project1.i18n.i18n","useBatch":false}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","viewPath":"project1.view","controlId":"app","controlAggregation":"pages","async":true},"routes":[{"pattern":"","name":"View1","target":"View1"},{"pattern":"attachments/{vendor_Id}","name":"View2","target":"View2"}],"targets":{"View1":{"viewName":"View1"},"View2":{"viewName":"View2"}}},"rootView":{"viewName":"project1.view.App","type":"XML","id":"App","async":true}},"sap.cloud":{"public":true,"service":"pdfsave.service"}}',
	"project1/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"project1/view/App.view.xml":'<mvc:View controllerName="project1.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"project1/view/CreateVendor.fragment.xml":'<core:FragmentDefinition\n  xmlns="sap.m"\n  xmlns:core="sap.ui.core"\n  xmlns:u="sap.ui.unified"><Dialog\n    id="createVendorDialog"\n    title="Create Vendor"\n    class="sapUiContentPadding"\n    draggable="true"\n    resizable="true"\n    contentWidth="600px"\n    contentHeight="auto"\n    afterClose="onDialogClose"><VBox><Label text="Vendor ID"/><Input id="newVendorId" placeholder="Enter Vendor ID"/><Label text="Vendor Name"/><Input id="newVendorName" placeholder="Enter Vendor Name"/><Label text="Email"/><Input id="newVendorEmail" placeholder="Enter Email"/><Label text="Phone"/><Input id="newVendorPhone" placeholder="Enter Phone"/><Label text="Attachments"/><u:FileUploader id="newFileUploader" multiple="true" fileType="pdf,docx,jpeg,png" change="onFileChange"/></VBox><beginButton><Button text="Submit" press="onSubmitNewVendor" type="Emphasized"/></beginButton><endButton><Button text="Cancel" press="onCancelVendor"/></endButton></Dialog></core:FragmentDefinition>\n',
	"project1/view/View1.view.xml":'<mvc:View\n  controllerName="project1.controller.View1"\n  xmlns:mvc="sap.ui.core.mvc"\n  xmlns="sap.m"\n  xmlns:u="sap.ui.unified"\n  displayBlock="true"\n  class="sapUiContentPadding"><Page><customHeader><Bar><contentMiddle><Title text="Vendor Management" level="H2" /></contentMiddle></Bar></customHeader><HBox justifyContent="Center"><Button text="Create Vendor" type="Emphasized" press="onCreateVendor"/></HBox><VBox class="sapUiSmallMarginTop"><HBox justifyContent="Center"><Title text="Vendor Details" level="H3" class="sapUiSmallMarginBottom"/></HBox><HBox justifyContent="Center" class="sapUiSmallMarginBottom"><Toolbar class="filterToolbar"><Input id="vendorIdFilter" placeholder="Filter by ID" width="10rem" liveChange="onFilter"/><Input id="vendorNameFilter" placeholder="Filter by Name" width="12rem" liveChange="onFilter"/><Input id="statusFilter" placeholder="Filter by Status" width="10rem" liveChange="onFilter"/></Toolbar></HBox><Table\n        id="vendorTable"\n        mode="SingleSelectMaster"\n        selectionChange="onVendorSelect"\n        items="{VendModel>/}"\n        inset="false"\n        alternateRowColors="true"\n        class="vendorTable"\n        fixedLayout="true"\n        width="100%"\n        busyIndicatorDelay="0"><columns><Column width="8em" hAlign="Center"><Text text="Vendor ID"/></Column><Column width="10em" hAlign="Center"><Text text="Name"/></Column><Column width="10em" hAlign="Center"><Text text="Email"/></Column><Column width="10em" hAlign="Center"><Text text="Phone"/></Column><Column width="8em" hAlign="Center"><Text text="Status"/></Column></columns><items><ColumnListItem><cells><Text text="{VendModel>ID}" wrapping="false"/><Text text="{VendModel>name}" wrapping="false"/><Text text="{VendModel>email}" wrapping="false"/><Text text="{VendModel>phone}" wrapping="false"/><Text text="{VendModel>status}" wrapping="false"/></cells></ColumnListItem></items></Table></VBox></Page></mvc:View>\n',
	"project1/view/View2.view.xml":'<mvc:View\n  controllerName="project1.controller.View2"\n  xmlns:mvc="sap.ui.core.mvc"\n  xmlns="sap.m"\n  xmlns:core="sap.ui.core"\n  displayBlock="true"><Page title="Vendor Details"><VBox fitContainer="true" alignItems="Center" class="sapUiSmallMargin"><VBox width="95%" class="sapUiMediumMarginBottom"><HBox justifyContent="Center" class="sapUiSmallMarginBottom"><Text id="vendorIdText" text="Vendor ID: " class="sapMTitle sapUiSmallMarginBottom" /></HBox><Panel expandable="true" expanded="true" width="auto" class="sapUiSmallMarginBottom"><headerToolbar><Toolbar><Title text="Attachments" /><ToolbarSpacer /><Button\n                text="Download All"\n                icon="sap-icon://download"\n                type="Transparent"\n                tooltip="Download all attachments"\n                press=".onDownloadAll"\n                visible="{= !!${attachmentModel>/files} &amp;&amp; ${attachmentModel>/files}.length > 0 }"\n                class="sapUiTinyMarginBegin" /></Toolbar></headerToolbar><content><BusyIndicator id="busyIndicator" visible="false" /><Table\n              id="attachmentTable"\n              items="{attachmentModel>/files}"\n              inset="false"\n              alternateRowColors="true"\n              noDataText="No attachments available for this vendor."><columns><Column><Text text="File Name" /></Column><Column hAlign="Center" width="8rem"><Text text="Action" /></Column></columns><items><ColumnListItem><cells><Text text="{attachmentModel>fileName}" /><Button\n                      icon="sap-icon://download"\n                      tooltip="Download File"\n                      press=".onDownloadPress"\n                      type="Transparent" /></cells></ColumnListItem></items></Table></content></Panel><Panel expandable="true" expanded="true" width="auto" class="sapUiSmallMarginBottom"><headerToolbar><Toolbar><Title text="Approval History" /></Toolbar></headerToolbar><content><Table\n              id="ApproverTable"\n              items="{VendModel1>/}"\n              inset="false"\n              alternateRowColors="true"\n              class="leftAlignedTable"\n              fixedLayout="true"\n              width="100%"\n              busyIndicatorDelay="0"><columns><Column width="8em" hAlign="Center"><Text text="Approver Level" /></Column><Column width="10em" hAlign="Center"><Text text="Approver Email" /></Column><Column width="10em" hAlign="Center"><Text text="Approver Status" /></Column><Column hAlign="Begin"><Text text="Approver Comments" /></Column></columns><items><ColumnListItem><cells><Text text="{VendModel1>level}" wrapping="false" /><Text text="{VendModel1>approver_email}" wrapping="false" /><Text text="{VendModel1>status}" wrapping="false" /><Text text="{VendModel1>comments}" wrapping="true" /></cells></ColumnListItem></items></Table></content></Panel></VBox></VBox></Page></mvc:View>\n'
});
//# sourceMappingURL=Component-preload.js.map
